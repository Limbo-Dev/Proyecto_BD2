DROP DATABASE IF EXISTS DB_DELTA

CREATE DATABASE DB_DELTA;

USE DB_DELTA;

CREATE TABLE DISTRIBUIDOR (
	ID INT PRIMARY KEY,
	NOMBRE NCHAR(100) NOT NULL,
	DIRECCION NCHAR(250),
	CIUDAD NCHAR(100),
	TELEFONO NCHAR(20) UNIQUE,
	EMAIL NCHAR(250) UNIQUE
)

CREATE TABLE AUTO (
	NUMPLACA NCHAR(6) PRIMARY KEY,
	MARCA NCHAR(100),
	DISTRIBUIDOR INT FOREIGN KEY REFERENCES DISTRIBUIDOR(ID),
	TIPO_MOTOR NCHAR(100), 
	TIPO_VEHICULO NCHAR(100),
	AUTO_ANIO INT,
	PRECIO_ALQUILER DECIMAL(6,2)
)

CREATE TABLE CLIENTE(
	CEDULA NCHAR(12) PRIMARY KEY,
	NOMBRE NCHAR(100) NOT NULL,
	APELLIDO NCHAR(100) NOT NULL,
	DIRECCION NCHAR(250) NOT NULL,
	TELEFONO NCHAR(20) UNIQUE NOT NULL,
	EMAIL NCHAR(250) UNIQUE,
	LICENCIA NCHAR(20) UNIQUE NOT NULL
)

CREATE TABLE ALQUILER (
	MATRICULA NCHAR(6),
	CEDULA_CLIENTE NCHAR(12),
	FECHA_INICIO_ALQUILER DATE NOT NULL,
	FECHA_FINAL_ALQUILER DATE NOT NULL,
	FOREIGN KEY (MATRICULA) REFERENCES AUTO(NUMPLACA),
	FOREIGN KEY (CEDULA_CLIENTE) REFERENCES CLIENTE(CEDULA),
	PRIMARY KEY (MATRICULA, CEDULA_CLIENTE)
)

-- NOTA: ejecutar primero los query de procedimientos almacenados y triggers primero
-- Insertando utilizando procedimiento almacenados

-- CLIENTES
EXEC INSERTAR_CLIENTE
	@CEDULA= '8-8888-8888', @NOMBRE = 'Antonio', @APELLIDO = 'Qiu',
	@DIRECCION = 'Panamá', @TELEFONO = '60603648', @EMAIL = 'antonio@gmail.com', @LICENCIA = '003631508'

EXEC INSERTAR_CLIENTE
	@CEDULA= '8-8888-8889', @NOMBRE = 'Sergio', @APELLIDO = 'Rodriguez',
	@DIRECCION = 'Panamá', @TELEFONO = '60603649', @EMAIL = 'sergio@gmail.com', @LICENCIA = '003631509'

EXEC INSERTAR_CLIENTE
	@CEDULA= '8-8888-8899', @NOMBRE = 'David', @APELLIDO = 'Torres',
	@DIRECCION = 'Panamá', @TELEFONO = '60603640', @EMAIL = 'david@gmail.com', @LICENCIA = '003631510'

EXEC INSERTAR_CLIENTE
	@CEDULA= '8-8888-8800', @NOMBRE = 'Fernando', @APELLIDO = 'Zeng',
	@DIRECCION = 'Panamá', @TELEFONO = '60603647', @EMAIL = 'fernando@gmail.com', @LICENCIA = '003631512'

EXEC INSERTAR_CLIENTE
	@CEDULA= '8-8888-8801', @NOMBRE = 'Carlos', @APELLIDO = 'Tuñon',
	@DIRECCION = 'Panamá', @TELEFONO = '68952136', @EMAIL = NULL, @LICENCIA = '003631513'
GO

-- DISTRIBUIDORES

EXEC INSERTAR_DISTRINUIDOR
	@ID = 1, @NOMBRE = 'Bryan Thomas', @DIRECCION = 'Panamá', @CIUDAD = 'Panamá',
	@TELEFONO = '65693562', @EMAIL = 'bryan@gmail.com'

EXEC INSERTAR_DISTRINUIDOR
	@ID = 2, @NOMBRE = 'Valerie Hernandez', @DIRECCION = 'Panamá', @CIUDAD = 'Panamá',
	@TELEFONO = '65693563', @EMAIL = 'valerie@gmail.com'

EXEC INSERTAR_DISTRINUIDOR
	@ID = 3, @NOMBRE = 'Alejandro Young', @DIRECCION = 'Panamá', @CIUDAD = 'Panamá',
	@TELEFONO = '65693564', @EMAIL = 'alejandro@gmail.com'

EXEC INSERTAR_DISTRINUIDOR
	@ID = 4, @NOMBRE = 'Christian Navarro', @DIRECCION = 'Panamá', @CIUDAD = 'Panamá',
	@TELEFONO = '65693565', @EMAIL = 'christian@gmail.com'

EXEC INSERTAR_DISTRINUIDOR
	@ID = 5, @NOMBRE = 'Christian Kucler', @DIRECCION = 'Panamá', @CIUDAD = 'Panamá',
	@TELEFONO = '65693566', @EMAIL = 'chris@gmail.com'
GO

-- AUTOS

EXEC INSERTAR_AUTO
	@NUMPLACA = '123457' ,@MARCA = 'HYUNDAI',@DISTRIBUIDOR = 1, @TIPO_MOTOR = 'DIESEL',
	@TIPO_VEHICULO = 'SEDAN', @AUTO_ANIO = '2019',@PRECIO_ALQUILER = 30.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123458' ,@MARCA = 'HONDA',@DISTRIBUIDOR = 2, @TIPO_MOTOR = 'GASOLINA 95 OCTANOS',
	@TIPO_VEHICULO = 'SUV', @AUTO_ANIO = '2020',@PRECIO_ALQUILER = 60.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123459' ,@MARCA = 'LEXUS',@DISTRIBUIDOR = 3, @TIPO_MOTOR = 'GASOLINA 95 OCTANOS',
	@TIPO_VEHICULO = 'SEDAN', @AUTO_ANIO = '2018',@PRECIO_ALQUILER = 70.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123460' ,@MARCA = 'TESLA',@DISTRIBUIDOR = 4, @TIPO_MOTOR = 'ELECTRICO',
	@TIPO_VEHICULO = 'SUV', @AUTO_ANIO = '2019',@PRECIO_ALQUILER = 120.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123461' ,@MARCA = 'CHEVROLET',@DISTRIBUIDOR = 5, @TIPO_MOTOR = 'GASOLINA 91 OCTANOS',
	@TIPO_VEHICULO = 'SEDAN', @AUTO_ANIO = '2021',@PRECIO_ALQUILER = 40.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123462' ,@MARCA = 'TESLA',@DISTRIBUIDOR = 4, @TIPO_MOTOR = 'ELECTRICO',
	@TIPO_VEHICULO = 'SEDAN', @AUTO_ANIO = '2019',@PRECIO_ALQUILER = 120.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123463' ,@MARCA = 'CHEVROLET',@DISTRIBUIDOR = 5, @TIPO_MOTOR = 'GASOLINA 95 OCTANOS',
	@TIPO_VEHICULO = 'SUV', @AUTO_ANIO = '2021',@PRECIO_ALQUILER = 100.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123464' ,@MARCA = 'LEXUS',@DISTRIBUIDOR = 3, @TIPO_MOTOR = 'HIBRIDO',
	@TIPO_VEHICULO = 'SUV', @AUTO_ANIO = '2021',@PRECIO_ALQUILER = 150.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123465' ,@MARCA = 'HONDA',@DISTRIBUIDOR = 2, @TIPO_MOTOR = 'GASOLINA 95 OCTANOS',
	@TIPO_VEHICULO = 'SUV', @AUTO_ANIO = '2021',@PRECIO_ALQUILER = 85.00

EXEC INSERTAR_AUTO
	@NUMPLACA = '123466' ,@MARCA = 'HYUNDAI',@DISTRIBUIDOR = 1, @TIPO_MOTOR = 'GASOLINA 91 OCTANOS',
	@TIPO_VEHICULO = 'SUV', @AUTO_ANIO = '2021',@PRECIO_ALQUILER = 80.00
GO

-- ALQUILER

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123457', @CEDULA_CLIENTE = '8-8888-8888', 
	@FECHA_INICIO_ALQUILER= '2021-12-08',@FECHA_FINAL_ALQUILER = '2022-01-08'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123458', @CEDULA_CLIENTE = '8-8888-8889', 
	@FECHA_INICIO_ALQUILER= '2021-12-08',@FECHA_FINAL_ALQUILER = '2022-01-08'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123459', @CEDULA_CLIENTE = '8-8888-8899', 
	@FECHA_INICIO_ALQUILER= '2021-12-08',@FECHA_FINAL_ALQUILER = '2022-01-08'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123460', @CEDULA_CLIENTE = '8-8888-8800', 
	@FECHA_INICIO_ALQUILER= '2021-12-08',@FECHA_FINAL_ALQUILER = '2022-01-08'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123461', @CEDULA_CLIENTE = '8-8888-8801', 
	@FECHA_INICIO_ALQUILER= '2021-12-08',@FECHA_FINAL_ALQUILER = '2022-01-08'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123462', @CEDULA_CLIENTE = '8-8888-8888', 
	@FECHA_INICIO_ALQUILER= '2022-01-08',@FECHA_FINAL_ALQUILER = '2022-01-30'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123463', @CEDULA_CLIENTE = '8-8888-8889', 
	@FECHA_INICIO_ALQUILER= '2022-01-08',@FECHA_FINAL_ALQUILER = '2022-01-30'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123464', @CEDULA_CLIENTE = '8-8888-8899', 
	@FECHA_INICIO_ALQUILER= '2022-01-08',@FECHA_FINAL_ALQUILER = '2022-01-11'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123465', @CEDULA_CLIENTE = '8-8888-8800', 
	@FECHA_INICIO_ALQUILER= '2022-01-08',@FECHA_FINAL_ALQUILER = '2022-01-10'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123466', @CEDULA_CLIENTE = '8-8888-8801', 
	@FECHA_INICIO_ALQUILER= '2022-01-08',@FECHA_FINAL_ALQUILER = '2022-01-9'

EXEC INSERTAR_ALQUILER
	@MATRICULA = '123466', @CEDULA_CLIENTE = '8-8888-8800', 
	@FECHA_INICIO_ALQUILER= '2022-01-09',@FECHA_FINAL_ALQUILER = '2022-01-12'
GO
